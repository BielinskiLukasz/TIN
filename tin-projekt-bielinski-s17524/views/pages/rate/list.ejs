<%- include('../../fragments/header.ejs') %>

<main>
    <h2>Lista ocen</h2>

    <h3 id="message" class="message-text"><%= message %></h3>

    <div class="table-div">
        <table class="table-list">
            <thead>
                <tr>
                    <th scope="col">Gra</th>
                    <th scope="col">Ocena</th>
                    <th scope="col">Gracz</th>
                    <th scope="col">Komentarz</th>
                    <th scope="col">Akcje</th>
                </tr>
            </thead>
            <tbody>
                <% for (let rate of rates) { %>
                <tr>
                    <td><%= rate.game.gameName %></td>
                    <td class="td-center"><%= rate.rate %></td>
                    <td class="td-center"><%= rate.gamer.nick %></td>
                    <% if (rate.comment == null) { %>
                    <td class="td-center">---</td>
                    <% } else { %>
                    <td><%= rate.comment.substring(0, 50) %></td>
                    <% } %>
                    <td>
                        <ul class="list-actions">
                            <li><a href="/rate/details/<%= rate._id %>"
                                    class="list-actions-button-details">Szczegóły</a>
                            </li>
                            <% if (loggedUser && loggedUser.nick == 'admin') { %>
                            <li><a href="/rate/edit/<%= rate._id %>" class="list-actions-button-edit">Edytuj</a></li>
                            <li><a href="/rate/delete/<%= rate._id %>" class="list-actions-button-delete">Usuń</a></li>
                            <% } %>
                        </ul>
                    </td>
                </tr>
                <% } %>
            </tbody>
        </table>
    </div>

</main>

<%- include('../../fragments/footer.ejs') %>